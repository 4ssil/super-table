/**
 * SuperTable makes the thead of any Table scroll with the browser
 * This is sometimes preferable over pure CSS table head scrolling as it
 * gives the user a more fluid experience if they prefer not to have more
 * than the one scroll-bar in the browser window.
 *
 * Author: Andrew Hackley
 * Released under the MIT license
 * https://github.com/hackley2/super-table
 *
 * Date: 2016-01-012
 *
 */
!function(o){o.fn.superTable=function(t){return this.each(function(){function s(t){return o.extend(_,t),e(),1==_.remove?void(_.remove=!1):(_.rowCollapse&&b(),_.columnCollapse&&w(),void(_.startCollapsed&&(m(!1),C(!1))))}function e(){_.scrollHead&&l(),_.scrollColumn&&u()}function l(){return _.remove?void o(B).remove():void(0!=o(B).length?(p(),f()):r())}function r(){var t=W.attr("class"),s="<div id='"+j+"div' class='hidden' style='display:none; overflow:hidden; border-bottom:1px solid "+W.css("border-right-color")+";'><table id='"+j+"' class='"+t+"' style='border: none !important;'></table></div>";o("body").append(s),o(M).css("border-left-width",W.css("border-left-width")),o(M).css("border-left-color",W.css("border-left-color")),o(M).css("border-left-style",W.css("border-left-style")),o(M).css("border-right-width",W.css("border-right-width")),o(M).css("border-right-color",W.css("border-right-color")),o(M).css("border-right-style",W.css("border-right-style"));var e=W.children("thead").clone();e.appendTo(B),e=W.children("tbody").clone(),e.appendTo(B);var l=W.offset();o(M).css({position:"fixed",marginLeft:"0px",marginTop:"0px",top:"0px",left:l.left,"z-index":"1111"}),c(),p(),f(),o(window).scroll(function(){f()}),o(window).resize(function(){p(),c(),f()})}function d(){z||(o(M).show().css("display","block"),z=!0)}function a(){H||(o(A).show().css("display","block"),H=!0)}function n(){z&&(o(M).hide(),z=!1)}function i(){H&&(o(A).hide(),H=!1)}function c(){o(M).css("height",W.children("thead").height())}function p(){o(M).css("width",W.outerWidth())}function h(){o(A).css("width",E()),o(q).css("width",W.outerWidth())}function f(){if(W.filter(":visible").length>=1){var t=W.offset(),s=W.height(),e=o(M).offset(),l=o(M).height(),r=o(window).scrollLeft(),a=o(window).scrollTop();if(t.left!=r+e.left){var i=0-(r-t.left);o(M).css("left",i+"px")}if(t.top<e.top&&t.top+s>e.top){var c=t.top+s-a;c-=l,0>=c?o(M).css("top",c+"px"):o(M).css("top","0px"),d()}else n()}else n()}function u(){if(_.remove)return void o(A).remove();var t=W.attr("class"),s=W.outerWidth(),e=E();if(0!=o(q).length)o(A).width(e);else{var l="<div id='"+Q+"div' style='display:none; overflow:hidden; border-right:1px solid; background:white; "+W.css("border-right-color")+";'><table id='"+Q+"' class='"+t+"' style='padding:0; background: white; width:"+s+"px; border-bottom-width:"+W.css("border-bottom-width")+"; top: -1px;'></table></div>";o("body").append(l);var r=W.children("thead"),d=r.clone();d.appendTo(q),r=W.children("tbody"),d=r.clone(),d.appendTo(q),o(A).width(e),o(A).css({position:"fixed",marginLeft:"0px",marginTop:"0px",top:"0px",left:"0px","z-index":"1110"}),o(q).css({"background-color":W.find(" th:nth-child(2)").css("background-color"),marginBottom:"0px"}),v(),o(window).scroll(function(){v()}),o(window).resize(function(){v()})}}function v(){if(W.filter(":visible").length>=1){var t=W.offset(),s=W.width(),e=o(A).offset(),l=o(A).width(),r=o(window).scrollLeft(),d=o(window).scrollTop(),n=o(window).width();if(h(),t.top!=e.top){var c=0-(d-t.top);o(A).css("top",c+"px")}if(t.left<r&&t.left<r+n){var p=t.left+s-e.left-l;0>p?(o(A).css("left",p+"px"),a()):(o(A).css("left","0px"),a())}else i()}else i()}function w(){var t=o("."+y()+">thead>tr>th");t.css("cursor","pointer"),t.click(function(){var t=o(this).attr("data-ST-group");C(t)}),o('*[data-super-table="'+W.attr("id")+'"]').click(function(){var o=!1;C(o)})}function C(t){var s="";t&&(s="[data-ST-group='"+t+"']");var l=!1;_.columnCollapsedClass!=_.columnExpandedClass&&""!=_.columnCollapsedClass&&""!=_.columnExpandedClass&&(l=!0);var r=o("."+y()+" .columnHideable"+s);"none"!=r.css("display")?(r.hide(),o("."+y()+" "+s+"[data-colspanmin]").each(function(){var t=o(this).attr("data-colspanmin");o(this).attr("colspan",t)}),l&&o("."+y()+" ."+_.columnExpandedClass+s).removeClass(_.columnExpandedClass).addClass(_.columnCollapsedClass)):(r.show(),o("."+y()+" "+s+"[data-colspanmax]").each(function(){var t=o(this).attr("data-colspanmax");o(this).attr("colspan",t)}),l&&o("."+y()+" ."+_.columnCollapsedClass+s).removeClass(_.columnCollapsedClass).addClass(_.columnExpandedClass)),c(),h(),e()}function b(){var t=o("."+y()+">tbody>tr>td:first-child"),s=o("."+y()+">thead>tr>th:first-child");t.css("cursor","pointer"),t.click(function(){var t=o(this).parent().attr("data-ST-group");m(t)}),s.click(function(){var o=!1;m(o)}),o('*[data-super-table="'+W.attr("id")+'"]').click(function(){var o=!1;m(o)})}function m(t){var s=!1;_.rowCollapsedClass!=_.rowExpandedClass&&""!=_.rowCollapsedClass&&""!=_.rowExpandedClass&&(s=!0);var l="";t&&(l="[data-ST-group='"+t+"']");var r=o("."+y()+" .rowHideable"+l);r.hasClass("hidden")?(r.removeClass("hidden").show(),s&&g(l)):(r.addClass("hidden").hide(),s&&x(l)),e()}function x(t){o("."+y()+" "+t+" ."+_.rowCollapsedClass).removeClass(_.rowCollapsedClass).addClass(_.rowExpandedClass)}function g(t){o("."+y()+" "+t+" ."+_.rowExpandedClass).removeClass(_.rowExpandedClass).addClass(_.rowCollapsedClass)}function y(){return L}function T(){if(""==L){if(null==W.attr("id")||""==W.attr("id"))for(var t=0;L="";t++)0==o(".ST_"+t).length&&(L="ST_"+t);else L="ST_"+W.attr("id");W.addClass(L)}}function E(){var o=k(),t=S();return Math.max(o,t)}function k(){var t=0;return W.children("tbody").children("tr").children("td:first-child").each(function(){0==t&&(t=o(this).innerWidth())}),t}function S(){var t=0;return W.children("thead").children("tr").children("th:first-child").each(function(){var s=o(this).outerWidth();s>t&&(t=s)}),t}var W=o(this),_=o.fn.superTable.defaults;o.extend(_,t);var z=!1,H=!1,L="";T();var j=y()+"_head",B="#"+j,M=B+"div",Q=y()+"_column",q="#"+Q,A=q+"div";s(t)})},o.fn.superTable.defaults={rowCollapse:!1,columnCollapse:!1,startCollapsed:!1,scrollHead:!0,scrollColumn:!0,rowCollapsedClass:"",rowExpandedClass:"",columnCollapsedClass:"",columnExpandedClass:"",remove:!1}}(jQuery);